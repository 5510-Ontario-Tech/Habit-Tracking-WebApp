<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habitude : Dashboard</title>
    <link rel="stylesheet" href="/css/design.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="/src/frontend/js/jquery-3.7.1.min.js"></script>
    <script src="/src/frontend/js/script.js>"></script>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-left">
            <img class="navbar-image" src="/src/frontend/assets/logo_app.svg"/>
            <button class="navigation-buttons active" onclick="window.location.href='homepage.html'">Home</button>
            <button class="navigation-buttons active" onclick="window.location.href='dashboard.html'">Dashboard</button>
            <button class="navigation-buttons active" onclick="window.location.href='aboutus.html'">About Us</button>
            <button class="navigation-buttons active" onclick="window.location.href='#'">Notifications</button>
        </div>
        <div class="navbar-right">
            <button class="navigation-buttons active" onclick="window.location.href='signin.html'">Login</button>
            <button class="navigation-buttons active" onclick="window.location.href='register.html'">Sign Up</button>
        </div>
    </nav>
    <div class="dashboard-body">
        <div class="dashboard-container">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <img class="profile-picD" id="profile-img" src="/src/frontend/assets/user_icon.png" alt="User">
                    <h2 class="username-dashboard">User</h2>
                    <div class="horizontal-line" style="display:flex; justify-content:space-between; height: 1px; flex: grow 1; background-color:black;"></div>
                     
                </div>
                <nav class="dashboard-sidebar">
                    <ul>
                        <li><img class="icon" src="/src/frontend/assets/home.png" alt="home"><button class="sidebar-btn" onclick="showSection('section1')">Dashboard</a></i></li>
                        <li><img class="icon" src="/src/frontend/assets/lifestyle.png" alt="lifestyle"><button class="sidebar-btn" onclick="window.location.href='#'">My Habits</a></li>
                        <li><img class="icon" src="/src/frontend/assets/refresh.png" alt="refresh"><button class="sidebar-btn" onclick="window.location.href='#'">Update Habits</a></li>
                        <li><img class="icon" src="/src/frontend/assets/delete.png" alt="delete"><button class="sidebar-btn" id="delete-habit-btn">Delete Habits</a></li>
                        <li><img class="icon" src="/src/frontend/assets/web-page.png" alt="settings"><a href="#">settings</a></li>
                        <!-- <li><a href="#">Streaks</a></li> -->
                    </ul>
                </nav>
            </aside>
           <main>
         <section id="dashboard">
            <h2 class="main">Dashboard</h2>
            <div class="habit-summary">
                <div class="summary-card">
                    <h3>Total Habits</h3>
                    <p id="total-habits">0</p>
                </div>
                <div class="summary-card">
                    <h3>Habits Completed</h3>
                    <p id="completed-habits">0</p>
                </div>
                <div class="summary-card">
                    <h3>Progress</h3>
                    <p id="habit-progress">0%</p>
                </div>
            </div>
        </section>
       
        <div id="habits">
            <h2 class="main">My Habits</h2>
            <form id="habit-form">
                <input type="text" id="habit-input" placeholder="New Habit" required>
                <button id="add-habit" type="submit">Add Habit</button>
            </form>
            <ul id="habit-list">
                <li class="habit item">
                    <input type="checkbox" id="habit1">
                    <label for="habit1" class="checkbox-label"></label>
                    <button type="submit" class="delete-habit">Delete</button>
                </li>
                <li class="habit item">
                    <input type="checkbox" id="habit1">
                    <label for="habit1" class="checkbox-label"></label>
                    <button type="submit" class="delete-habit">Delete</button>
                </li>
            </ul>
        </div>

        <section id="statistics">
            <h2 class="main">Statistics</h2>
            <canvas id="habit-chart"></canvas>
        </section>

        <section id="settings">
            <h2 class="main">Settings</h2>
            <div class="profile-photo">
                <img id="profile-img" src="/src/frontend/assets/user_icon.png"/>
                <input type="file" id="photo-input" accept="image/*"/>
                <button id="update-btn">Update Profile</button>
            </div>
            <div class="username-section">
                <label for="username">Change Username:</label>
                <input type="text" id="username" placeholder="Enter new username" />
                <button class ="update-btn">Update Profile</button>
              </div>
            <button id="logout-btn">Logout</button>
        </section>
     
    </main>
    </div>
</body>
<script>
    $(document).ready(function() {
        // Elements from the DOM
        const $habitForm = $("#habit-form");
        const $habitInput = $("#habit-input");
        const $habitList = $("#habit-list");
        const $totalHabits = $("#total-habits"); 
        const $completedHabits = $("#completed-habits");
        const $habitProgress = $("#habit-progress");
        const $logoutButton = $("#logout-btn");
        const $photoInput = $("#photo-input");
    
        // Arrays to store habit data
        let habits = [];
    
        // Function to update the dashboard
        function updateDashboard() {
            const total = habits.length;
            const completed = habits.filter(habit => habit.completed).length;
            const progress = total > 0 ? Math.round((completed / total) * 100) : 0;
    
            // Update the dashboard stats
            $totalHabits.text(total);
            $completedHabits.text(completed);
            $habitProgress.text(`${progress}%`);
        }
    
        // Function to render the habit list
        function renderHabitList() {
            $habitList.empty();
            habits.forEach((habit, index) => {
                const $li = $("<li>").addClass("habit-item");
    
                const $span = $("<span>").text(habit.name);
                if (habit.completed) {
                    $span.addClass("completed");
                }
    
                // Create a checkbox to mark as completed
                const $checkbox = $("<input>").attr("type", "checkbox").prop("checked", habit.completed);
                $checkbox.on("change", function() {
                    habit.completed = $(this).prop("checked");
                    updateDashboard();
                    renderHabitList();
                });
    
                // Add delete button for habit
                const $deleteBtn = $("<button>").addClass("delete-habit").text("Delete");
                $deleteBtn.on("click", function() {
                    var confirmation = confirm("Are you sure you want to delete this habit?");
                    if (confirmation) {
                        habits.splice(index, 1);  // Remove the habit from the array
                        updateDashboard();
                        renderHabitList();  // Re-render the habit list
                    }
                });
    
                $li.append($checkbox).append($span).append($deleteBtn);
                $habitList.append($li);
            });
        }
    
        // Handle the form submission to add a new habit
        $habitForm.on("submit", function(e) {
            e.preventDefault();
    
            // Add new habit to the array
            const newHabit = {
                name: $habitInput.val(),
                completed: false
            };
            habits.push(newHabit);
    
            // Clear the input field
            $habitInput.val("");
    
            // Update the dashboard and habit list
            updateDashboard();
            renderHabitList();
        });
    
        // Handle logout functionality
        $logoutButton.on("click", function() {
            alert("Logging out...");
        });
    
        // Update profile photo
        $("#update-btn").on("click", function() {
            $photoInput.on("change", function(event) {
                const file = event.target.files[0];
                if (file && file.type.startsWith("image/")) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        $("#profile-img").attr("src", e.target.result);
                    };
                    reader.readAsDataURL(file);
                } else {
                    alert("Please select a valid image.");
                }
            });
        });
    
        // Update username
        $("#update-btn").on("click", function() {
            const newUsername = $("#username").val().trim();
            if (newUsername !== "") {
                $("#username").text(newUsername); // Update username in the UI
                alert("Profile updated successfully!");
            } else {
                alert("Please enter a valid username.");
            }
        });
    
        // Scroll to habit section when clicking "delete-habit-btn"
        $("#delete-habit-btn").click(function() {
            $("html, body").animate({
                scrollTop: $('.habit-item').offset().top
            }, 1000);
        });
    
        // Initialize dashboard
        updateDashboard();
        renderHabitList();
    });

</script>
</html>